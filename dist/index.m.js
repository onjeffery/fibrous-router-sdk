function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function t(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e;!function(r){r.UniswapV2="UniswapV2",r.UniswapV3="UniswapV3"}(e||(e={}));var n=function(r){return Number(r.replace("%",""))},o=/*#__PURE__*/function(){function r(r){this.url=void 0,this.url=r}var e=r.prototype;return e.route=function(r){try{return Promise.resolve(function(r,t){try{var e=r+"?"+Object.keys(t).map(function(r){return r+"="+t[r]}).join("&");return Promise.resolve(fetch(e)).then(function(r){return r.json()})}catch(r){return Promise.reject(r)}}(this.url,r))}catch(r){return Promise.reject(r)}},e.tokenList=function(){try{return Promise.resolve(fetch(this.url+"/tokens")).then(function(r){if(r.ok)return r.json();throw new Error(r.statusText)})}catch(r){return Promise.reject(r)}},e.buildTransaction=function(r){var e=function(r,e,o){for(var a,i=Math.pow(10,6),u=[],s=100,c=t(r.route);!(a=c()).done;){var l=a.value,f=n(l.percent),p=f/s;s-=f;for(var d=0;d<l.swaps.length;d++)for(var v,h=0==d?p:1,m=100,y=t(l.swaps[d]);!(v=y()).done;){var g=v.value,b=n(g.percent),A=b/m*h;m-=b,u.push([g.fromTokenAddress,g.toTokenAddress,(w=A,String(Math.floor(1e6*Number(w.toFixed(4))))),String(g.protocol),g.poolAddress])}}var w,j=BigInt(r.outputAmount)*BigInt((1-e)*i)/BigInt(i);return[String(u.length)].concat(u.flat(),[r.inputToken.address,r.outputToken.address,r.inputAmount,"0",String(j),"0",o])}(r.route,r.slippage,r.accountAddress);return{contractAddress:r.routerAddress,entryPoint:"swap",call_data:e}},r}();export{o as Router};
